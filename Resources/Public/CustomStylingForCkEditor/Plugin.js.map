{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@ckeditor/ckeditor5-basic-styles/src/attributecommand.js","webpack:///./node_modules/@ckeditor/ckeditor5-core/src/command.js","webpack:///./node_modules/@ckeditor/ckeditor5-core/src/plugin.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/ckeditorerror.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/emittermixin.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/eventinfo.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_Reflect.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_apply.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_assignValue.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_baseKeysIn.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_baseProperty.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_baseTimes.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_checkGlobal.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_copyObject.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_createAssigner.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_getLength.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_indexKeys.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_isIndex.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_isIterateeCall.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_isPrototype.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_iteratorToArray.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/_root.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/assignIn.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/eq.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/extend.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isArguments.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isArray.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isArrayLike.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isArrayLikeObject.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isFunction.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isLength.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isObject.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isObjectLike.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isString.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/isSymbol.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/keysIn.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/rest.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/toFinite.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/toInteger.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/lib/lodash/toNumber.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/mix.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/observablemixin.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/priorities.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/spy.js","webpack:///./node_modules/@ckeditor/ckeditor5-utils/src/uid.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/createConsumerApi.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/manifest.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/readFromConsumerApi.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/registry/AbstractRegistry.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousMetaRegistry.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/registry/SynchronousRegistry.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/dist/registry/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-ckeditor5-bindings/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/plow-js/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js","webpack:///./node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js","webpack:///./node_modules/@neos-project/positional-array-sorter/dist/positionalArraySorter.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/ExampleButton.js","webpack:///./src/examplePlugin.js","webpack:///./src/index.js","webpack:///./src/manifest.js"],"names":["AttributeCommand","editor","attributeKey","model","doc","document","value","_getValueFromFirstAllowedNode","isEnabled","schema","checkAttributeInSelection","selection","options","forceValue","undefined","change","isCollapsed","writer","setSelectionAttribute","removeSelectionAttribute","ranges","getValidRanges","getRanges","range","setAttribute","removeAttribute","hasAttribute","getItems","item","checkAttribute","Command","set","decorate","listenTo","refresh","on","evt","stop","priority","name","forceDisable","off","stopListening","ObservableMixin","return","Plugin","attachLinkToDocumentation","DOCUMENTATION_URL","CKEditorError","message","data","JSON","stringify","error","Error","matchedErrorName","match","_getEmitterListenedTo","_setEmitterId","_getEmitterId","_listeningTo","Symbol","_emitterId","EmitterMixin","event","callback","once","onceCallback","args","call","emitter","emitterInfo","eventCallbacks","emitters","emitterId","callbacks","push","createEventNamespace","lists","getCallbacksListsForNamespace","priorities","get","callbackDefinition","added","i","length","splice","removeCallback","pop","fire","eventOrInfo","eventInfo","EventInfo","getCallbacksForEvent","path","callbackArgs","Array","from","apply","called","_delegations","destinations","passAllDestinations","fireDelegatedEvents","delegate","events","to","nameOrFunction","Map","eventName","stopDelegating","clear","delete","listeningEmitter","listenedToEmitterId","id","getEvents","source","_events","Object","defineProperty","makeEventNode","childEvents","childEventName","newEventNodes","substr","lastIndexOf","node","slice","eventNode","callbacksLists","childCallbacksLists","concat","indexOf","fireArgs","delegatedInfo","Reflect","root","func","thisArg","objectProto","prototype","hasOwnProperty","assignValue","object","key","objValue","enumerate","propertyIsEnumerable","baseKeysIn","result","baseProperty","baseTimes","n","iteratee","index","checkGlobal","copyObject","props","customizer","newValue","createAssigner","assigner","sources","guard","getLength","indexKeys","String","MAX_SAFE_INTEGER","reIsUint","isIndex","test","isIterateeCall","type","isPrototype","Ctor","constructor","proto","iteratorToArray","iterator","next","done","objectTypes","freeExports","exports","nodeType","freeModule","module","freeGlobal","global","freeSelf","self","freeWindow","window","thisGlobal","Function","nonEnumShadows","assignIn","eq","other","default","argsTag","objectToString","toString","isArguments","isArray","isArrayLike","isArrayLikeObject","funcTag","genTag","isFunction","tag","isLength","isObject","isObjectLike","stringTag","isString","symbolTag","isSymbol","keysIn","isProto","propsLength","indexes","skipIndexes","FUNC_ERROR_TEXT","nativeMax","Math","max","rest","start","TypeError","arguments","array","otherArgs","INFINITY","MAX_INTEGER","toFinite","sign","toInteger","remainder","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","valueOf","replace","isBinary","mix","baseClass","mixins","forEach","getOwnPropertyNames","mixin","getOwnPropertySymbols","sourceDescriptor","getOwnPropertyDescriptor","enumerable","observablePropertiesSymbol","boundObservablesSymbol","boundPropertiesSymbol","keys","property","initObservable","properties","has","configurable","oldValue","bind","bindProperties","isStringArray","Set","size","boundProperties","propertyName","bindings","binding","a","bindTo","toMany","bindToMany","_observable","_bindProperties","_to","_bindings","unbind","boundObservables","unbindProperties","toObservable","toProperty","toProperties","toPropertyBindings","boundObservable","methodName","originalMethod","observable","parsedArgs","parseBindToArgs","bindingsKeys","numberOfBindings","attachBindToListeners","updateBindToBound","updateBoundObservableProperty","observables","attribute","getBindingTargets","observableAndAttributePairs","map","arr","every","parsed","lastObservable","updateBoundObservables","toPropertyName","bindingsToObservable","add","chain","propertyValue","toBindings","normal","highest","high","low","lowest","spy","uid","uuid","floor","random","substring","__esModule","tslib_1","require","manifest_1","__importDefault","createReadOnlyValue","writable","createConsumerApi","manifests","exposureMap","api","createConsumerApi_1","readFromConsumerApi_1","readFromConsumerApi","index_1","SynchronousRegistry","SynchronousMetaRegistry","identifier","bootstrap","_a","_i","AbstractRegistry","description","SERIAL_VERSION_UID","SynchronousRegistry_1","_super","__extends","AbstractRegistry_1","positional_array_sorter_1","_this","_registry","position","entry","indexOfItemWithTheSameKey","findIndex","console","find","_getChildrenWrapped","searchKey","unsortedChildren","filter","getChildrenAsObject","getChildren","Boolean","_getAllWrapped","getAllAsObject","getAllAsList","assign","SynchronousMetaRegistry_1","CkEditorApi","NeosUiDecorators","ReactUiComponents","plow","PropTypes","React","isOriginal","getOriginal","Number","positionalArraySorter","subject","idKey","positionAccessor","positionsArray","validKeys","middleKeys","startKeys","endKeys","beforeKeys","afterKeys","corruptKeys","isNaN","includes","weightMatch","weight","keyMatch","warn","sortByWeightFunc","b","sortWithRetainingOriginalPos","_b","sortedIndexes","sort","pair","_loop_1","alteredNumber","targetIndexInSubject","indexInIndexes","state_1","ExampleButton","i18nRegistry","globalRegistry","handleClick","onClick","isActive","title","translate","tooltip","icon","PureComponent","propTypes","string","boolean","Example","extend","allowAttributes","config","view","classes","styles","conversion","attributeToElement","commands","addExamplePlugin","ckEditorConfiguration","editorOptions","plugins","ExamplePlugin","richtextToolbar","commandName","isVisible","component"],"mappings":"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","file":"Plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module basic-styles/attributecommand\n */\n\nimport Command from '@ckeditor/ckeditor5-core/src/command';\n\n/**\n * An extension of the base {@link module:core/command~Command} class, which provides utilities for a command\n * that toggles a single attribute on a text or an element.\n *\n * `AttributeCommand` uses {@link module:engine/model/document~Document#selection}\n * to decide which nodes (if any) should be changed, and applies or removes the attribute from them.\n *\n * The command checks the {@link module:engine/model/model~Model#schema} to decide if it can be enabled\n * for the current selection and to which nodes the attribute can be applied.\n *\n * @extends module:core/command~Command\n */\nexport default class AttributeCommand extends Command {\n\t/**\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {String} attributeKey Attribute that will be set by the command.\n\t */\n\tconstructor( editor, attributeKey ) {\n\t\tsuper( editor );\n\n\t\t/**\n\t\t * The attribute that will be set by the command.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.attributeKey = attributeKey;\n\n\t\t/**\n\t\t * Flag indicating whether the command is active. The command is active when the\n\t\t * {@link module:engine/model/selection~Selection#hasAttribute selection has the attribute} which means that:\n\t\t *\n\t\t * * If the selection is not empty &ndash; That the attribute is set on the first node in the selection that allows this attribute.\n\t\t * * If the selection is empty &ndash; That the selection has the attribute itself (which means that newly typed\n\t\t * text will have this attribute, too).\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #value\n\t\t */\n\t}\n\n\t/**\n\t * Updates the command's {@link #value} and {@link #isEnabled} based on the current selection.\n\t */\n\trefresh() {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\n\t\tthis.value = this._getValueFromFirstAllowedNode();\n\t\tthis.isEnabled = model.schema.checkAttributeInSelection( doc.selection, this.attributeKey );\n\t}\n\n\t/**\n\t * Executes the command &mdash; applies the attribute to the selection or removes it from the selection.\n\t *\n\t * If the command is active (`value == true`), it will remove attributes. Otherwise, it will set attributes.\n\t *\n\t * The execution result differs, depending on the {@link module:engine/model/document~Document#selection}:\n\t *\n\t * * If the selection is on a range, the command applies the attribute to all nodes in that range\n\t * (if they are allowed to have this attribute by the {@link module:engine/model/schema~Schema schema}).\n\t * * If the selection is collapsed in a non-empty node, the command applies the attribute to the\n\t * {@link module:engine/model/document~Document#selection} itself (note that typed characters copy attributes from the selection).\n\t * * If the selection is collapsed in an empty node, the command applies the attribute to the parent node of the selection (note\n\t * that the selection inherits all attributes from a node if it is in an empty node).\n\t *\n\t * @fires execute\n\t * @param {Object} [options] Command options.\n\t * @param {Boolean} [options.forceValue] If set, it will force the command behavior. If `true`, the command will apply the attribute,\n\t * otherwise the command will remove the attribute.\n\t * If not set, the command will look for its current value to decide what it should do.\n\t */\n\texecute( options = {} ) {\n\t\tconst model = this.editor.model;\n\t\tconst doc = model.document;\n\t\tconst selection = doc.selection;\n\t\tconst value = ( options.forceValue === undefined ) ? !this.value : options.forceValue;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( selection.isCollapsed ) {\n\t\t\t\tif ( value ) {\n\t\t\t\t\twriter.setSelectionAttribute( this.attributeKey, true );\n\t\t\t\t} else {\n\t\t\t\t\twriter.removeSelectionAttribute( this.attributeKey );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst ranges = model.schema.getValidRanges( selection.getRanges(), this.attributeKey );\n\n\t\t\t\tfor ( const range of ranges ) {\n\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\twriter.setAttribute( this.attributeKey, value, range );\n\t\t\t\t\t} else {\n\t\t\t\t\t\twriter.removeAttribute( this.attributeKey, range );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Checks the attribute value of the first node in the selection that allows the attribute.\n\t * For the collapsed selection returns the selection attribute.\n\t *\n\t * @private\n\t * @returns {Boolean} The attribute value.\n\t */\n\t_getValueFromFirstAllowedNode() {\n\t\tconst model = this.editor.model;\n\t\tconst schema = model.schema;\n\t\tconst selection = model.document.selection;\n\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn selection.hasAttribute( this.attributeKey );\n\t\t}\n\n\t\tfor ( const range of selection.getRanges() ) {\n\t\t\tfor ( const item of range.getItems() ) {\n\t\t\t\tif ( schema.checkAttribute( item, this.attributeKey ) ) {\n\t\t\t\t\treturn item.hasAttribute( this.attributeKey );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module core/command\n */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The base class for CKEditor commands.\n *\n * Commands are the main way to manipulate editor contents and state. They are mostly used by UI elements (or by other\n * commands) to make changes in the model. Commands are available in every part of code that has access to\n * the {@link module:core/editor/editor~Editor editor} instance.\n *\n * Instances of registered commands can be retrieved from {@link module:core/editor/editor~Editor#commands}.\n * The easiest way to execute a command is through {@link module:core/editor/editor~Editor#execute}.\n *\n * By default commands are disabled when the editor is in {@link module:core/editor/editor~Editor#isReadOnly read-only} mode.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Command {\n\t/**\n\t * Creates a new `Command` instance.\n\t *\n\t * @param {module:core/editor/editor~Editor} editor Editor on which this command will be used.\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor on which this command will be used.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor}\n\t\t */\n\t\tthis.editor = editor;\n\n\t\t/**\n\t\t * The value of a command. Concrete command class should define what it represents.\n\t\t *\n\t\t * For example, the `bold` command's value is whether the selection starts in a bolded text.\n\t\t * And the value of the `link` command may be an object with links details.\n\t\t *\n\t\t * It's possible for a command to have no value (e.g. for stateless actions such as `imageUpload`).\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member #value\n\t\t */\n\t\tthis.set( 'value', undefined );\n\n\t\t/**\n\t\t * Flag indicating whether a command is enabled or disabled.\n\t\t * A disabled command should do nothing when executed.\n\t\t *\n\t\t * @observable\n\t\t * @readonly\n\t\t * @member {Boolean} #isEnabled\n\t\t */\n\t\tthis.set( 'isEnabled', false );\n\n\t\tthis.decorate( 'execute' );\n\n\t\t// By default every command is refreshed when changes are applied to the model.\n\t\tthis.listenTo( this.editor.model.document, 'change', () => {\n\t\t\tthis.refresh();\n\t\t} );\n\n\t\tthis.on( 'execute', evt => {\n\t\t\tif ( !this.isEnabled ) {\n\t\t\t\tevt.stop();\n\t\t\t}\n\t\t}, { priority: 'high' } );\n\n\t\t// By default commands are disabled when the editor is in read-only mode.\n\t\tthis.listenTo( editor, 'change:isReadOnly', ( evt, name, value ) => {\n\t\t\tif ( value ) {\n\t\t\t\tthis.on( 'set:isEnabled', forceDisable, { priority: 'highest' } );\n\t\t\t\tthis.isEnabled = false;\n\t\t\t} else {\n\t\t\t\tthis.off( 'set:isEnabled', forceDisable );\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Refreshes the command. The command should update its {@link #isEnabled} and {@link #value} property\n\t * in this method.\n\t *\n\t * This method is automatically called when\n\t * {@link module:engine/model/document~Document#event:change any changes are applied to the document}.\n\t */\n\trefresh() {\n\t\tthis.isEnabled = true;\n\t}\n\n\t/**\n\t * Executes the command.\n\t *\n\t * A command may accept parameters. They will be passed from {@link module:core/editor/editor~Editor#execute}\n\t * to the command.\n\t *\n\t * The `execute()` method will automatically abort when the command is disabled ({@link #isEnabled} is `false`).\n\t * This behavior is implemented by a high priority listener to the {@link #event:execute} event.\n\t *\n\t * @fires execute\n\t */\n\texecute() {}\n\n\t/**\n\t * Destroys the command.\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Event fired by the {@link #execute} method. The command action is a listener to this event so it's\n\t * possible to change/cancel the behavior of the command by listening to this event.\n\t *\n\t * See {@link module:utils/observablemixin~ObservableMixin.decorate} for more information and samples.\n\t *\n\t * **Note:** This event is fired even if command is disabled. However, it is automatically blocked\n\t * by a high priority listener in order to prevent command execution.\n\t *\n\t * @event execute\n\t */\n}\n\nmix( Command, ObservableMixin );\n\n// Helper function that forces command to be disabled.\nfunction forceDisable( evt ) {\n\tevt.return = false;\n\tevt.stop();\n}\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module core/plugin\n */\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The base class for CKEditor plugin classes.\n *\n * @implements module:core/plugin~PluginInterface\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( editor ) {\n\t\t/**\n\t\t * The editor instance.\n\t\t *\n\t\t * Note that most editors implement the {@link module:core/editor/editorwithui~EditorWithUI} interface in addition\n\t\t * to the base {@link module:core/editor/editor~Editor} interface. However, editors with an external UI\n\t\t * (i.e. Bootstrap-based) or a headless editor may not implement the {@link module:core/editor/editorwithui~EditorWithUI}\n\t\t * interface.\n\t\t *\n\t\t * Because of above, to make plugins more universal, it is recommended to split features into:\n\t\t *  - The \"editing\" part that only uses the {@link module:core/editor/editor~Editor} interface.\n\t\t *  - The \"UI\" part that uses both the {@link module:core/editor/editor~Editor} interface and\n\t\t *  the {@link module:core/editor/editorwithui~EditorWithUI} interface.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:core/editor/editor~Editor} #editor\n\t\t */\n\t\tthis.editor = editor;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n}\n\nmix( Plugin, ObservableMixin );\n\n/**\n * The base interface for CKEditor plugins.\n *\n * In its minimal form it can be a simple function (it will be used as a constructor) that accepts\n * {@link module:core/editor/editor~Editor the editor} as a parameter.\n * It can also implement a few methods which, when present, will be used to properly initialize and destroy the plugin.\n *\n *\t\t// A simple plugin that enables a data processor.\n *\t\tfunction MyPlugin( editor ) {\n *\t\t\teditor.data.processor = new MyDataProcessor();\n *\t\t}\n *\n * In most cases, however, you will want to inherit from the {@link module:core/plugin~Plugin} class which implements the\n * {@link module:utils/observablemixin~ObservableMixin} and is, therefore, more convenient:\n *\n *\t\tclass MyPlugin extends Plugin {\n *\t\t\tinit() {\n *\t\t\t\t// `listenTo()` and `editor` are available thanks to `Plugin`.\n *\t\t\t\t// By using `listenTo()` you will ensure that the listener is removed when\n *\t\t\t\t// the plugin is destroyed.\n *\t\t\t\tthis.listenTo( this.editor, 'dataReady', () => {\n *\t\t\t\t\t// Do something when the data is ready.\n *\t\t\t\t} );\n *\t\t\t}\n *\t\t}\n *\n * @interface PluginInterface\n */\n\n/**\n * Creates a new plugin instance. This is the first step of the plugin initialization.\n * See also {@link #init} and {@link #afterInit}.\n *\n * A plugin is always instantiated after its {@link module:core/plugin~PluginInterface.requires dependencies} and the\n * {@link #init} and {@link #afterInit} methods are called in the same order.\n *\n * Usually, you will want to put your plugin's initialization code in the {@link #init} method.\n * The constructor can be understood as \"before init\" and used in special cases, just like\n * {@link #afterInit} serves the special \"after init\" scenarios (e.g.the code which depends on other\n * plugins, but which does not {@link module:core/plugin~PluginInterface.requires explicitly require} them).\n *\n * @method #constructor\n * @param {module:core/editor/editor~Editor} editor\n */\n\n/**\n * An array of plugins required by this plugin.\n *\n * To keep the plugin class definition tight it is recommended to define this property as a static getter:\n *\n *\t\timport Image from './image.js';\n *\n *\t\texport default class ImageCaption {\n *\t\t\tstatic get requires() {\n *\t\t\t\treturn [ Image ];\n *\t\t\t}\n *\t\t}\n *\n * @static\n * @readonly\n * @member {Array.<Function>|undefined} module:core/plugin~PluginInterface.requires\n */\n\n/**\n * An optional name of the plugin. If set, the plugin will be available in\n * {@link module:core/plugincollection~PluginCollection#get} by its\n * name and its constructor. If not, then only by its constructor.\n *\n * The name should reflect the constructor name.\n *\n * To keep the plugin class definition tight it is recommended to define this property as a static getter:\n *\n *\t\texport default class ImageCaption {\n *\t\t\tstatic get pluginName() {\n *\t\t\t\treturn 'ImageCaption';\n *\t\t\t}\n *\t\t}\n *\n * Note: The native `Function.name` property could not be used to keep the plugin name because\n * it will be mangled during code minification.\n *\n * Naming a plugin is necessary to enable removing it through the\n * {@link module:core/editor/editorconfig~EditorConfig#removePlugins `config.removePlugins`} option.\n *\n * @static\n * @readonly\n * @member {String|undefined} module:core/plugin~PluginInterface.pluginName\n */\n\n/**\n * The second stage (after plugin {@link #constructor}) of plugin initialization.\n * Unlike the plugin constructor this method can be asynchronous.\n *\n * A plugin's `init()` method is called after its {@link module:core/plugin~PluginInterface.requires dependencies} are initialized,\n * so in the same order as constructors of these plugins.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #init\n * @returns {null|Promise}\n */\n\n/**\n * The third (and last) stage of plugin initialization. See also {@link #constructor} and {@link #init}.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #afterInit\n * @returns {null|Promise}\n */\n\n/**\n * Destroys the plugin.\n *\n * **Note:** This method is optional. A plugin instance does not need to have it defined.\n *\n * @method #destroy\n * @returns {null|Promise}\n */\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/ckeditorerror\n */\n\n/**\n * URL to the documentation with error codes.\n */\nexport const DOCUMENTATION_URL =\n\t'https://docs.ckeditor.com/ckeditor5/latest/framework/guides/support/error-codes.html';\n\n/**\n * The CKEditor error class.\n *\n * All errors will be shortened during the minification process in order to reduce the code size.\n * Therefore, all error messages should be documented in the same way as those in {@link module:utils/log}.\n *\n * Read more in the {@link module:utils/log} module.\n *\n * @extends Error\n */\nexport default class CKEditorError extends Error {\n\t/**\n\t * Creates an instance of the CKEditorError class.\n\t *\n\t * Read more about error logging in the {@link module:utils/log} module.\n\t *\n\t * @param {String} message The error message in an `error-name: Error message.` format.\n\t * During the minification process the \"Error message\" part will be removed to limit the code size\n\t * and a link to this error documentation will be added to the `message`.\n\t * @param {Object} [data] Additional data describing the error. A stringified version of this object\n\t * will be appended to the error message, so the data are quickly visible in the console. The original\n\t * data object will also be later available under the {@link #data} property.\n\t */\n\tconstructor( message, data ) {\n\t\tmessage = attachLinkToDocumentation( message );\n\n\t\tif ( data ) {\n\t\t\tmessage += ' ' + JSON.stringify( data );\n\t\t}\n\n\t\tsuper( message );\n\n\t\t/**\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = 'CKEditorError';\n\n\t\t/**\n\t\t * The additional error data passed to the constructor.\n\t\t *\n\t\t * @member {Object}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Checks if error is an instance of CKEditorError class.\n\t *\n\t * @param {Object} error Object to check.\n\t * @returns {Boolean}\n\t */\n\tstatic isCKEditorError( error ) {\n\t\treturn error instanceof CKEditorError;\n\t}\n}\n\n/**\n * Attaches link to the documentation at the end of the error message.\n *\n * @param {String} message Message to be logged.\n * @returns {String}\n */\nexport function attachLinkToDocumentation( message ) {\n\tconst matchedErrorName = message.match( /^([^:]+):/ );\n\n\tif ( !matchedErrorName ) {\n\t\treturn message;\n\t}\n\n\treturn message + ` Read more: ${ DOCUMENTATION_URL }#error-${ matchedErrorName[ 1 ] }\\n`;\n}\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/emittermixin\n */\n\nimport EventInfo from './eventinfo';\nimport uid from './uid';\nimport priorities from './priorities';\n\nconst _listeningTo = Symbol( 'listeningTo' );\nconst _emitterId = Symbol( 'emitterId' );\n\n/**\n * Mixin that injects the {@link ~Emitter events API} into its host.\n *\n * @mixin EmitterMixin\n * @implements module:utils/emittermixin~Emitter\n */\nconst EmitterMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\ton( event, callback, options = {} ) {\n\t\tthis.listenTo( this, event, callback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tonce( event, callback, options ) {\n\t\tconst onceCallback = function( event, ...args ) {\n\t\t\t// Go off() at the first call.\n\t\t\tevent.off();\n\n\t\t\t// Go with the original callback.\n\t\t\tcallback.call( this, event, ...args );\n\t\t};\n\n\t\t// Make a similar on() call, simply replacing the callback.\n\t\tthis.listenTo( this, event, onceCallback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\toff( event, callback ) {\n\t\tthis.stopListening( this, event, callback );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tlistenTo( emitter, event, callback, options = {} ) {\n\t\tlet emitterInfo, eventCallbacks;\n\n\t\t// _listeningTo contains a list of emitters that this object is listening to.\n\t\t// This list has the following format:\n\t\t//\n\t\t// _listeningTo: {\n\t\t//     emitterId: {\n\t\t//         emitter: emitter,\n\t\t//         callbacks: {\n\t\t//             event1: [ callback1, callback2, ... ]\n\t\t//             ....\n\t\t//         }\n\t\t//     },\n\t\t//     ...\n\t\t// }\n\n\t\tif ( !this[ _listeningTo ] ) {\n\t\t\tthis[ _listeningTo ] = {};\n\t\t}\n\n\t\tconst emitters = this[ _listeningTo ];\n\n\t\tif ( !_getEmitterId( emitter ) ) {\n\t\t\t_setEmitterId( emitter );\n\t\t}\n\n\t\tconst emitterId = _getEmitterId( emitter );\n\n\t\tif ( !( emitterInfo = emitters[ emitterId ] ) ) {\n\t\t\temitterInfo = emitters[ emitterId ] = {\n\t\t\t\temitter,\n\t\t\t\tcallbacks: {}\n\t\t\t};\n\t\t}\n\n\t\tif ( !( eventCallbacks = emitterInfo.callbacks[ event ] ) ) {\n\t\t\teventCallbacks = emitterInfo.callbacks[ event ] = [];\n\t\t}\n\n\t\teventCallbacks.push( callback );\n\n\t\t// Finally register the callback to the event.\n\t\tcreateEventNamespace( emitter, event );\n\t\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\t\tconst priority = priorities.get( options.priority );\n\n\t\tconst callbackDefinition = {\n\t\t\tcallback,\n\t\t\tpriority\n\t\t};\n\n\t\t// Add the callback to all callbacks list.\n\t\tfor ( const callbacks of lists ) {\n\t\t\t// Add the callback to the list in the right priority position.\n\t\t\tlet added = false;\n\n\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\tif ( callbacks[ i ].priority < priority ) {\n\t\t\t\t\tcallbacks.splice( i, 0, callbackDefinition );\n\t\t\t\t\tadded = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add at the end, if right place was not found.\n\t\t\tif ( !added ) {\n\t\t\t\tcallbacks.push( callbackDefinition );\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\tconst emitters = this[ _listeningTo ];\n\t\tlet emitterId = emitter && _getEmitterId( emitter );\n\t\tconst emitterInfo = emitters && emitterId && emitters[ emitterId ];\n\t\tconst eventCallbacks = emitterInfo && event && emitterInfo.callbacks[ event ];\n\n\t\t// Stop if nothing has been listened.\n\t\tif ( !emitters || ( emitter && !emitterInfo ) || ( event && !eventCallbacks ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// All params provided. off() that single callback.\n\t\tif ( callback ) {\n\t\t\tremoveCallback( emitter, event, callback );\n\t\t}\n\t\t// Only `emitter` and `event` provided. off() all callbacks for that event.\n\t\telse if ( eventCallbacks ) {\n\t\t\twhile ( ( callback = eventCallbacks.pop() ) ) {\n\t\t\t\tremoveCallback( emitter, event, callback );\n\t\t\t}\n\n\t\t\tdelete emitterInfo.callbacks[ event ];\n\t\t}\n\t\t// Only `emitter` provided. off() all events for that emitter.\n\t\telse if ( emitterInfo ) {\n\t\t\tfor ( event in emitterInfo.callbacks ) {\n\t\t\t\tthis.stopListening( emitter, event );\n\t\t\t}\n\t\t\tdelete emitters[ emitterId ];\n\t\t}\n\t\t// No params provided. off() all emitters.\n\t\telse {\n\t\t\tfor ( emitterId in emitters ) {\n\t\t\t\tthis.stopListening( emitters[ emitterId ].emitter );\n\t\t\t}\n\t\t\tdelete this[ _listeningTo ];\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tfire( eventOrInfo, ...args ) {\n\t\tconst eventInfo = eventOrInfo instanceof EventInfo ? eventOrInfo : new EventInfo( this, eventOrInfo );\n\t\tconst event = eventInfo.name;\n\t\tlet callbacks = getCallbacksForEvent( this, event );\n\n\t\t// Record that the event passed this emitter on its path.\n\t\teventInfo.path.push( this );\n\n\t\t// Handle event listener callbacks first.\n\t\tif ( callbacks ) {\n\t\t\t// Arguments passed to each callback.\n\t\t\tconst callbackArgs = [ eventInfo, ...args ];\n\n\t\t\t// Copying callbacks array is the easiest and most secure way of preventing infinite loops, when event callbacks\n\t\t\t// are added while processing other callbacks. Previous solution involved adding counters (unique ids) but\n\t\t\t// failed if callbacks were added to the queue before currently processed callback.\n\t\t\t// If this proves to be too inefficient, another method is to change `.on()` so callbacks are stored if same\n\t\t\t// event is currently processed. Then, `.fire()` at the end, would have to add all stored events.\n\t\t\tcallbacks = Array.from( callbacks );\n\n\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\tcallbacks[ i ].callback.apply( this, callbackArgs );\n\n\t\t\t\t// Remove the callback from future requests if off() has been called.\n\t\t\t\tif ( eventInfo.off.called ) {\n\t\t\t\t\t// Remove the called mark for the next calls.\n\t\t\t\t\tdelete eventInfo.off.called;\n\n\t\t\t\t\tremoveCallback( this, event, callbacks[ i ].callback );\n\t\t\t\t}\n\n\t\t\t\t// Do not execute next callbacks if stop() was called.\n\t\t\t\tif ( eventInfo.stop.called ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Delegate event to other emitters if needed.\n\t\tif ( this._delegations ) {\n\t\t\tconst destinations = this._delegations.get( event );\n\t\t\tconst passAllDestinations = this._delegations.get( '*' );\n\n\t\t\tif ( destinations ) {\n\t\t\t\tfireDelegatedEvents( destinations, eventInfo, args );\n\t\t\t}\n\n\t\t\tif ( passAllDestinations ) {\n\t\t\t\tfireDelegatedEvents( passAllDestinations, eventInfo, args );\n\t\t\t}\n\t\t}\n\n\t\treturn eventInfo.return;\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdelegate( ...events ) {\n\t\treturn {\n\t\t\tto: ( emitter, nameOrFunction ) => {\n\t\t\t\tif ( !this._delegations ) {\n\t\t\t\t\tthis._delegations = new Map();\n\t\t\t\t}\n\n\t\t\t\tfor ( const eventName of events ) {\n\t\t\t\t\tconst destinations = this._delegations.get( eventName );\n\n\t\t\t\t\tif ( !destinations ) {\n\t\t\t\t\t\tthis._delegations.set( eventName, new Map( [ [ emitter, nameOrFunction ] ] ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestinations.set( emitter, nameOrFunction );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopDelegating( event, emitter ) {\n\t\tif ( !this._delegations ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !event ) {\n\t\t\tthis._delegations.clear();\n\t\t} else if ( !emitter ) {\n\t\t\tthis._delegations.delete( event );\n\t\t} else {\n\t\t\tconst destinations = this._delegations.get( event );\n\n\t\t\tif ( destinations ) {\n\t\t\t\tdestinations.delete( emitter );\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default EmitterMixin;\n\n/**\n * Emitter/listener interface.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/emittermixin~EmitterMixin} mixin.\n *\n * @interface Emitter\n */\n\n/**\n * Registers a callback function to be executed when an event is fired.\n *\n * Shorthand for {@link #listenTo `this.listenTo( this, event, callback, options )`} (it makes the emitter\n * listen on itself).\n *\n * @method #on\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Registers a callback function to be executed on the next time the event is fired only. This is similar to\n * calling {@link #on} followed by {@link #off} in the callback.\n *\n * @method #once\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops executing the callback on the given event.\n * Shorthand for {@link #stopListening `this.stopListening( this, event, callback )`}.\n *\n * @method #off\n * @param {String} event The name of the event.\n * @param {Function} callback The function to stop being called.\n */\n\n/**\n * Registers a callback function to be executed when an event is fired in a specific (emitter) object.\n *\n * Events can be grouped in namespaces using `:`.\n * When namespaced event is fired, it additionally fires all callbacks for that namespace.\n *\n *\t\t// myEmitter.on( ... ) is a shorthand for myEmitter.listenTo( myEmitter, ... ).\n *\t\tmyEmitter.on( 'myGroup', genericCallback );\n *\t\tmyEmitter.on( 'myGroup:myEvent', specificCallback );\n *\n *\t\t// genericCallback is fired.\n *\t\tmyEmitter.fire( 'myGroup' );\n *\t\t// both genericCallback and specificCallback are fired.\n *\t\tmyEmitter.fire( 'myGroup:myEvent' );\n *\t\t// genericCallback is fired even though there are no callbacks for \"foo\".\n *\t\tmyEmitter.fire( 'myGroup:foo' );\n *\n * An event callback can {@link module:utils/eventinfo~EventInfo#stop stop the event} and\n * set the {@link module:utils/eventinfo~EventInfo#return return value} of the {@link #fire} method.\n *\n * @method #listenTo\n * @param {module:utils/emittermixin~Emitter} emitter The object that fires the event.\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops listening for events. It can be used at different levels:\n *\n * * To stop listening to a specific callback.\n * * To stop listening to a specific event.\n * * To stop listening to all events fired by a specific object.\n * * To stop listening to all events fired by all objects.\n *\n * @method #stopListening\n * @param {module:utils/emittermixin~Emitter} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n * for all events from `emitter`.\n * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n * `event`.\n */\n\n/**\n * Fires an event, executing all callbacks registered for it.\n *\n * The first parameter passed to callbacks is an {@link module:utils/eventinfo~EventInfo} object,\n * followed by the optional `args` provided in the `fire()` method call.\n *\n * @method #fire\n * @param {String|module:utils/eventinfo~EventInfo} eventOrInfo The name of the event or `EventInfo` object if event is delegated.\n * @param {...*} [args] Additional arguments to be passed to the callbacks.\n * @returns {*} By default the method returns `undefined`. However, the return value can be changed by listeners\n * through modification of the {@link module:utils/eventinfo~EventInfo#return `evt.return`}'s property (the event info\n * is the first param of every callback).\n */\n\n/**\n * Delegates selected events to another {@link module:utils/emittermixin~Emitter}. For instance:\n *\n *\t\temitterA.delegate( 'eventX' ).to( emitterB );\n *\t\temitterA.delegate( 'eventX', 'eventY' ).to( emitterC );\n *\n * then `eventX` is delegated (fired by) `emitterB` and `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventX', data );\n *\n * and `eventY` is delegated (fired by) `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventY', data );\n *\n * @method #delegate\n * @param {...String} events Event names that will be delegated to another emitter.\n * @returns {module:utils/emittermixin~EmitterMixinDelegateChain}\n */\n\n/**\n * Stops delegating events. It can be used at different levels:\n *\n * * To stop delegating all events.\n * * To stop delegating a specific event to all emitters.\n * * To stop delegating a specific event to a specific emitter.\n *\n * @method #stopDelegating\n * @param {String} [event] The name of the event to stop delegating. If omitted, stops it all delegations.\n * @param {module:utils/emittermixin~Emitter} [emitter] (requires `event`) The object to stop delegating a particular event to.\n * If omitted, stops delegation of `event` to all emitters.\n */\n\n/**\n * Checks if `listeningEmitter` listens to an emitter with given `listenedToEmitterId` and if so, returns that emitter.\n * If not, returns `null`.\n *\n * @protected\n * @param {module:utils/emittermixin~EmitterMixin} listeningEmitter Emitter that listens.\n * @param {String} listenedToEmitterId Unique emitter id of emitter listened to.\n * @returns {module:utils/emittermixin~EmitterMixin|null}\n */\nexport function _getEmitterListenedTo( listeningEmitter, listenedToEmitterId ) {\n\tif ( listeningEmitter[ _listeningTo ] && listeningEmitter[ _listeningTo ][ listenedToEmitterId ] ) {\n\t\treturn listeningEmitter[ _listeningTo ][ listenedToEmitterId ].emitter;\n\t}\n\n\treturn null;\n}\n\n/**\n * Sets emitter's unique id.\n *\n * **Note:** `_emitterId` can be set only once.\n *\n * @protected\n * @param {module:utils/emittermixin~EmitterMixin} emitter Emitter for which id will be set.\n * @param {String} [id] Unique id to set. If not passed, random unique id will be set.\n */\nexport function _setEmitterId( emitter, id ) {\n\tif ( !emitter[ _emitterId ] ) {\n\t\temitter[ _emitterId ] = id || uid();\n\t}\n}\n\n/**\n * Returns emitter's unique id.\n *\n * @protected\n * @param {module:utils/emittermixin~EmitterMixin} emitter Emitter which id will be returned.\n */\nexport function _getEmitterId( emitter ) {\n\treturn emitter[ _emitterId ];\n}\n\n// Gets the internal `_events` property of the given object.\n// `_events` property store all lists with callbacks for registered event names.\n// If there were no events registered on the object, empty `_events` object is created.\nfunction getEvents( source ) {\n\tif ( !source._events ) {\n\t\tObject.defineProperty( source, '_events', {\n\t\t\tvalue: {}\n\t\t} );\n\t}\n\n\treturn source._events;\n}\n\n// Creates event node for generic-specific events relation architecture.\nfunction makeEventNode() {\n\treturn {\n\t\tcallbacks: [],\n\t\tchildEvents: []\n\t};\n}\n\n// Creates an architecture for generic-specific events relation.\n// If needed, creates all events for given eventName, i.e. if the first registered event\n// is foo:bar:abc, it will create foo:bar:abc, foo:bar and foo event and tie them together.\n// It also copies callbacks from more generic events to more specific events when\n// specific events are created.\nfunction createEventNamespace( source, eventName ) {\n\tconst events = getEvents( source );\n\n\t// First, check if the event we want to add to the structure already exists.\n\tif ( events[ eventName ] ) {\n\t\t// If it exists, we don't have to do anything.\n\t\treturn;\n\t}\n\n\t// In other case, we have to create the structure for the event.\n\t// Note, that we might need to create intermediate events too.\n\t// I.e. if foo:bar:abc is being registered and we only have foo in the structure,\n\t// we need to also register foo:bar.\n\n\t// Currently processed event name.\n\tlet name = eventName;\n\t// Name of the event that is a child event for currently processed event.\n\tlet childEventName = null;\n\n\t// Array containing all newly created specific events.\n\tconst newEventNodes = [];\n\n\t// While loop can't check for ':' index because we have to handle generic events too.\n\t// In each loop, we truncate event name, going from the most specific name to the generic one.\n\t// I.e. foo:bar:abc -> foo:bar -> foo.\n\twhile ( name !== '' ) {\n\t\tif ( events[ name ] ) {\n\t\t\t// If the currently processed event name is already registered, we can be sure\n\t\t\t// that it already has all the structure created, so we can break the loop here\n\t\t\t// as no more events need to be registered.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If this event is not yet registered, create a new object for it.\n\t\tevents[ name ] = makeEventNode();\n\t\t// Add it to the array with newly created events.\n\t\tnewEventNodes.push( events[ name ] );\n\n\t\t// Add previously processed event name as a child of this event.\n\t\tif ( childEventName ) {\n\t\t\tevents[ name ].childEvents.push( childEventName );\n\t\t}\n\n\t\tchildEventName = name;\n\t\t// If `.lastIndexOf()` returns -1, `.substr()` will return '' which will break the loop.\n\t\tname = name.substr( 0, name.lastIndexOf( ':' ) );\n\t}\n\n\tif ( name !== '' ) {\n\t\t// If name is not empty, we found an already registered event that was a parent of the\n\t\t// event we wanted to register.\n\n\t\t// Copy that event's callbacks to newly registered events.\n\t\tfor ( const node of newEventNodes ) {\n\t\t\tnode.callbacks = events[ name ].callbacks.slice();\n\t\t}\n\n\t\t// Add last newly created event to the already registered event.\n\t\tevents[ name ].childEvents.push( childEventName );\n\t}\n}\n\n// Gets an array containing callbacks list for a given event and it's more specific events.\n// I.e. if given event is foo:bar and there is also foo:bar:abc event registered, this will\n// return callback list of foo:bar and foo:bar:abc (but not foo).\nfunction getCallbacksListsForNamespace( source, eventName ) {\n\tconst eventNode = getEvents( source )[ eventName ];\n\n\tif ( !eventNode ) {\n\t\treturn [];\n\t}\n\n\tlet callbacksLists = [ eventNode.callbacks ];\n\n\tfor ( let i = 0; i < eventNode.childEvents.length; i++ ) {\n\t\tconst childCallbacksLists = getCallbacksListsForNamespace( source, eventNode.childEvents[ i ] );\n\n\t\tcallbacksLists = callbacksLists.concat( childCallbacksLists );\n\t}\n\n\treturn callbacksLists;\n}\n\n// Get the list of callbacks for a given event, but only if there any callbacks have been registered.\n// If there are no callbacks registered for given event, it checks if this is a specific event and looks\n// for callbacks for it's more generic version.\nfunction getCallbacksForEvent( source, eventName ) {\n\tlet event;\n\n\tif ( !source._events || !( event = source._events[ eventName ] ) || !event.callbacks.length ) {\n\t\t// There are no callbacks registered for specified eventName.\n\t\t// But this could be a specific-type event that is in a namespace.\n\t\tif ( eventName.indexOf( ':' ) > -1 ) {\n\t\t\t// If the eventName is specific, try to find callback lists for more generic event.\n\t\t\treturn getCallbacksForEvent( source, eventName.substr( 0, eventName.lastIndexOf( ':' ) ) );\n\t\t} else {\n\t\t\t// If this is a top-level generic event, return null;\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn event.callbacks;\n}\n\n// Fires delegated events for given map of destinations.\n//\n// @private\n// * @param {Map.<utils.Emitter>} destinations A map containing `[ {@link utils.Emitter}, \"event name\" ]` pair destinations.\n// * @param {utils.EventInfo} eventInfo The original event info object.\n// * @param {Array.<*>} fireArgs Arguments the original event was fired with.\nfunction fireDelegatedEvents( destinations, eventInfo, fireArgs ) {\n\tfor ( let [ emitter, name ] of destinations ) {\n\t\tif ( !name ) {\n\t\t\tname = eventInfo.name;\n\t\t} else if ( typeof name == 'function' ) {\n\t\t\tname = name( eventInfo.name );\n\t\t}\n\n\t\tconst delegatedInfo = new EventInfo( eventInfo.source, name );\n\n\t\tdelegatedInfo.path = [ ...eventInfo.path ];\n\n\t\temitter.fire( delegatedInfo, ...fireArgs );\n\t}\n}\n\n// Removes callback from emitter for given event.\n//\n// @param {module:utils/emittermixin~Emitter} emitter\n// @param {String} event\n// @param {Function} callback\nfunction removeCallback( emitter, event, callback ) {\n\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\n\tfor ( const callbacks of lists ) {\n\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\tif ( callbacks[ i ].callback == callback ) {\n\t\t\t\t// Remove the callback from the list (fixing the next index).\n\t\t\t\tcallbacks.splice( i, 1 );\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * The return value of {@link ~EmitterMixin#delegate}.\n *\n * @interface module:utils/emittermixin~EmitterMixinDelegateChain\n */\n\n/**\n * Selects destination for {@link module:utils/emittermixin~EmitterMixin#delegate} events.\n *\n * @method #to\n * @param {module:utils/emittermixin~Emitter} emitter An `EmitterMixin` instance which is the destination for delegated events.\n * @param {String|Function} nameOrFunction A custom event name or function which converts the original name string.\n */\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/eventinfo\n */\n\nimport spy from './spy';\n\n/**\n * The event object passed to event callbacks. It is used to provide information about the event as well as a tool to\n * manipulate it.\n */\nexport default class EventInfo {\n\t/**\n\t * @param {Object} source The emitter.\n\t * @param {String} name The event name.\n\t */\n\tconstructor( source, name ) {\n\t\t/**\n\t\t * The object that fired the event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object}\n\t\t */\n\t\tthis.source = source;\n\n\t\t/**\n\t\t * The event name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Path this event has followed. See {@link module:utils/emittermixin~EmitterMixin#delegate}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Object>}\n\t\t */\n\t\tthis.path = [];\n\n\t\t// The following methods are defined in the constructor because they must be re-created per instance.\n\n\t\t/**\n\t\t * Stops the event emitter to call further callbacks for this event interaction.\n\t\t *\n\t\t * @method #stop\n\t\t */\n\t\tthis.stop = spy();\n\n\t\t/**\n\t\t * Removes the current callback from future interactions of this event.\n\t\t *\n\t\t * @method #off\n\t\t */\n\t\tthis.off = spy();\n\n\t\t/**\n\t\t * The value which will be returned by {@link module:utils/emittermixin~EmitterMixin#fire}.\n\t\t *\n\t\t * It's `undefined` by default and can be changed by an event listener:\n\t\t *\n\t\t *\t\tdataController.fire( 'getSelectedContent', ( evt ) => {\n\t\t *\t\t\t// This listener will make `dataController.fire( 'getSelectedContent' )`\n\t\t *\t\t\t// always return an empty DocumentFragment.\n\t\t *\t\t\tevt.return = new DocumentFragment();\n\t\t *\n\t\t *\t\t\t// Make sure no other listeners are executed.\n\t\t *\t\t\tevt.stop();\n\t\t *\t\t} );\n\t\t *\n\t\t * @member #return\n\t\t */\n\t}\n}\n","import root from './_root';\n\n/** Built-in value references. */\nvar Reflect = root.Reflect;\n\nexport default Reflect;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import eq from './eq';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nexport default assignValue;\n","import Reflect from './_Reflect';\nimport iteratorToArray from './_iteratorToArray';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar enumerate = Reflect ? Reflect.enumerate : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.keysIn` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  object = object == null ? object : Object(object);\n\n  var result = [];\n  for (var key in object) {\n    result.push(key);\n  }\n  return result;\n}\n\n// Fallback for IE < 9 with es6-shim.\nif (enumerate && !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf')) {\n  baseKeysIn = function(object) {\n    return iteratorToArray(enumerate(object));\n  };\n}\n\nexport default baseKeysIn;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\nexport default checkGlobal;\n","import assignValue from './_assignValue';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\nexport default copyObject;\n","import isIterateeCall from './_isIterateeCall';\nimport rest from './rest';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseProperty from './_baseProperty';\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a\n * [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792) that affects\n * Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nexport default getLength;\n","import baseTimes from './_baseTimes';\nimport isArguments from './isArguments';\nimport isArray from './isArray';\nimport isLength from './isLength';\nimport isString from './isString';\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\nexport default indexKeys;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import eq from './eq';\nimport isArrayLike from './isArrayLike';\nimport isIndex from './_isIndex';\nimport isObject from './isObject';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\nexport default iteratorToArray;\n","import checkGlobal from './_checkGlobal';\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\nexport default root;\n","import assignValue from './_assignValue';\nimport copyObject from './_copyObject';\nimport createAssigner from './_createAssigner';\nimport isArrayLike from './isArrayLike';\nimport isPrototype from './_isPrototype';\nimport keysIn from './keysIn';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * function Bar() {\n *   this.d = 4;\n * }\n *\n * Foo.prototype.c = 3;\n * Bar.prototype.e = 5;\n *\n * _.assignIn({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keysIn(source), object);\n    return;\n  }\n  for (var key in source) {\n    assignValue(object, key, source[key]);\n  }\n});\n\nexport default assignIn;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","export { default } from './assignIn'\n","import isArrayLikeObject from './isArrayLikeObject';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified,\n *  else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import getLength from './_getLength';\nimport isFunction from './isFunction';\nimport isLength from './isLength';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value)) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import isArrayLike from './isArrayLike';\nimport isObjectLike from './isObjectLike';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import isObject from './isObject';\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified,\n *  else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\nexport default isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length,\n *  else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import isArray from './isArray';\nimport isObjectLike from './isObjectLike';\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified,\n *  else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nexport default isString;\n","import isObjectLike from './isObjectLike';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified,\n *  else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseKeysIn from './_baseKeysIn';\nimport indexKeys from './_indexKeys';\nimport isIndex from './_isIndex';\nimport isPrototype from './_isPrototype';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  var index = -1,\n      isProto = isPrototype(object),\n      props = baseKeysIn(object),\n      propsLength = props.length,\n      indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if (!(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default keysIn;\n","import apply from './_apply';\nimport toInteger from './toInteger';\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as\n * an array.\n *\n * **Note:** This method is based on the\n * [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default rest;\n","import toNumber from './toNumber';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","import isFunction from './isFunction';\nimport isObject from './isObject';\nimport isSymbol from './isSymbol';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/mix\n */\n\n/**\n * Copies enumerable properties and symbols from the objects given as 2nd+ parameters to the\n * prototype of first object (a constructor).\n *\n *\t\tclass Editor {\n *\t\t\t...\n *\t\t}\n *\n *\t\tconst SomeMixin = {\n *\t\t\ta() {\n *\t\t\t\treturn 'a';\n *\t\t\t}\n *\t\t};\n *\n *\t\tmix( Editor, SomeMixin, ... );\n *\n *\t\tnew Editor().a(); // -> 'a'\n *\n * Note: Properties which already exist in the base class will not be overriden.\n *\n * @param {Function} [baseClass] Class which prototype will be extended.\n * @param {Object} [...mixins] Objects from which to get properties.\n */\nexport default function mix( baseClass, ...mixins ) {\n\tmixins.forEach( mixin => {\n\t\tObject.getOwnPropertyNames( mixin ).concat( Object.getOwnPropertySymbols( mixin ) )\n\t\t\t.forEach( key => {\n\t\t\t\tif ( key in baseClass.prototype ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sourceDescriptor = Object.getOwnPropertyDescriptor( mixin, key );\n\t\t\t\tsourceDescriptor.enumerable = false;\n\n\t\t\t\tObject.defineProperty( baseClass.prototype, key, sourceDescriptor );\n\t\t\t} );\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/observablemixin\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport extend from './lib/lodash/extend';\nimport isObject from './lib/lodash/isObject';\n\nconst observablePropertiesSymbol = Symbol( 'observableProperties' );\nconst boundObservablesSymbol = Symbol( 'boundObservables' );\nconst boundPropertiesSymbol = Symbol( 'boundProperties' );\n\n/**\n * Mixin that injects the \"observable properties\" and data binding functionality described in the\n * {@link ~Observable} interface.\n *\n * @mixin ObservableMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/observablemixin~Observable\n */\nconst ObservableMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tset( name, value ) {\n\t\t// If the first parameter is an Object, iterate over its properties.\n\t\tif ( isObject( name ) ) {\n\t\t\tObject.keys( name ).forEach( property => {\n\t\t\t\tthis.set( property, name[ property ] );\n\t\t\t}, this );\n\n\t\t\treturn;\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst properties = this[ observablePropertiesSymbol ];\n\n\t\tif ( ( name in this ) && !properties.has( name ) ) {\n\t\t\t/**\n\t\t\t * Cannot override an existing property.\n\t\t\t *\n\t\t\t * This error is thrown when trying to {@link ~Observable#set set} an property with\n\t\t\t * a name of an already existing property. For example:\n\t\t\t *\n\t\t\t *\t\tlet observable = new Model();\n\t\t\t *\t\tobservable.property = 1;\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// throws\n\t\t\t *\n\t\t\t *\t\tobservable.set( 'property', 1 );\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// ok, because this is an existing property.\n\t\t\t *\n\t\t\t * @error observable-set-cannot-override\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-set-cannot-override: Cannot override an existing property.' );\n\t\t}\n\n\t\tObject.defineProperty( this, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget() {\n\t\t\t\treturn properties.get( name );\n\t\t\t},\n\n\t\t\tset( value ) {\n\t\t\t\tconst oldValue = properties.get( name );\n\n\t\t\t\t// Fire `set` event before the new value will be set to make it possible\n\t\t\t\t// to override observable property without affecting `change` event.\n\t\t\t\t// See https://github.com/ckeditor/ckeditor5-utils/issues/171.\n\t\t\t\tlet newValue = this.fire( 'set:' + name, name, value, oldValue );\n\n\t\t\t\tif ( newValue === undefined ) {\n\t\t\t\t\tnewValue = value;\n\t\t\t\t}\n\n\t\t\t\t// Allow undefined as an initial value like A.define( 'x', undefined ) (#132).\n\t\t\t\t// Note: When properties map has no such own property, then its value is undefined.\n\t\t\t\tif ( oldValue !== newValue || !properties.has( name ) ) {\n\t\t\t\t\tproperties.set( name, newValue );\n\t\t\t\t\tthis.fire( 'change:' + name, name, newValue, oldValue );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis[ name ] = value;\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tbind( ...bindProperties ) {\n\t\tif ( !bindProperties.length || !isStringArray( bindProperties ) ) {\n\t\t\t/**\n\t\t\t * All properties must be strings.\n\t\t\t *\n\t\t\t * @error observable-bind-wrong-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-wrong-properties: All properties must be strings.' );\n\t\t}\n\n\t\tif ( ( new Set( bindProperties ) ).size !== bindProperties.length ) {\n\t\t\t/**\n\t\t\t * Properties must be unique.\n\t\t\t *\n\t\t\t * @error observable-bind-duplicate-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-duplicate-properties: Properties must be unique.' );\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\n\t\tbindProperties.forEach( propertyName => {\n\t\t\tif ( boundProperties.has( propertyName ) ) {\n\t\t\t\t/**\n\t\t\t\t * Cannot bind the same property more that once.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-rebind\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-bind-rebind: Cannot bind the same property more that once.' );\n\t\t\t}\n\t\t} );\n\n\t\tconst bindings = new Map();\n\n\t\t// @typedef {Object} Binding\n\t\t// @property {Array} property Property which is bound.\n\t\t// @property {Array} to Array of observable–property components of the binding (`{ observable: ..., property: .. }`).\n\t\t// @property {Array} callback A function which processes `to` components.\n\t\tbindProperties.forEach( a => {\n\t\t\tconst binding = { property: a, to: [] };\n\n\t\t\tboundProperties.set( a, binding );\n\t\t\tbindings.set( a, binding );\n\t\t} );\n\n\t\t// @typedef {Object} BindChain\n\t\t// @property {Function} to See {@link ~ObservableMixin#_bindTo}.\n\t\t// @property {Function} toMany See {@link ~ObservableMixin#_bindToMany}.\n\t\t// @property {module:utils/observablemixin~Observable} _observable The observable which initializes the binding.\n\t\t// @property {Array} _bindProperties Array of `_observable` properties to be bound.\n\t\t// @property {Array} _to Array of `to()` observable–properties (`{ observable: toObservable, properties: ...toProperties }`).\n\t\t// @property {Map} _bindings Stores bindings to be kept in\n\t\t// {@link ~ObservableMixin#_boundProperties}/{@link ~ObservableMixin#_boundObservables}\n\t\t// initiated in this binding chain.\n\t\treturn {\n\t\t\tto: bindTo,\n\t\t\ttoMany: bindToMany,\n\n\t\t\t_observable: this,\n\t\t\t_bindProperties: bindProperties,\n\t\t\t_to: [],\n\t\t\t_bindings: bindings\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tunbind( ...unbindProperties ) {\n\t\t// Nothing to do here if not inited yet.\n\t\tif ( !( observablePropertiesSymbol in this ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\t\tconst boundObservables = this[ boundObservablesSymbol ];\n\n\t\tif ( unbindProperties.length ) {\n\t\t\tif ( !isStringArray( unbindProperties ) ) {\n\t\t\t\t/**\n\t\t\t\t * Properties must be strings.\n\t\t\t\t *\n\t\t\t\t * @error observable-unbind-wrong-properties\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-unbind-wrong-properties: Properties must be strings.' );\n\t\t\t}\n\n\t\t\tunbindProperties.forEach( propertyName => {\n\t\t\t\tconst binding = boundProperties.get( propertyName );\n\n\t\t\t\t// Nothing to do if the binding is not defined\n\t\t\t\tif ( !binding ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet toObservable, toProperty, toProperties, toPropertyBindings;\n\n\t\t\t\tbinding.to.forEach( to => {\n\t\t\t\t\t// TODO: ES6 destructuring.\n\t\t\t\t\ttoObservable = to[ 0 ];\n\t\t\t\t\ttoProperty = to[ 1 ];\n\t\t\t\t\ttoProperties = boundObservables.get( toObservable );\n\t\t\t\t\ttoPropertyBindings = toProperties[ toProperty ];\n\n\t\t\t\t\ttoPropertyBindings.delete( binding );\n\n\t\t\t\t\tif ( !toPropertyBindings.size ) {\n\t\t\t\t\t\tdelete toProperties[ toProperty ];\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !Object.keys( toProperties ).length ) {\n\t\t\t\t\t\tboundObservables.delete( toObservable );\n\t\t\t\t\t\tthis.stopListening( toObservable, 'change' );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tboundProperties.delete( propertyName );\n\t\t\t} );\n\t\t} else {\n\t\t\tboundObservables.forEach( ( bindings, boundObservable ) => {\n\t\t\t\tthis.stopListening( boundObservable, 'change' );\n\t\t\t} );\n\n\t\t\tboundObservables.clear();\n\t\t\tboundProperties.clear();\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdecorate( methodName ) {\n\t\tconst originalMethod = this[ methodName ];\n\n\t\tif ( !originalMethod ) {\n\t\t\t/**\n\t\t\t * Cannot decorate an undefined method.\n\t\t\t *\n\t\t\t * @error observablemixin-cannot-decorate-undefined\n\t\t\t * @param {Object} object The object which method should be decorated.\n\t\t\t * @param {String} methodName Name of the method which does not exist.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.',\n\t\t\t\t{ object: this, methodName }\n\t\t\t);\n\t\t}\n\n\t\tthis.on( methodName, ( evt, args ) => {\n\t\t\tevt.return = originalMethod.apply( this, args );\n\t\t} );\n\n\t\tthis[ methodName ] = function( ...args ) {\n\t\t\treturn this.fire( methodName, args );\n\t\t};\n\t}\n};\n\nextend( ObservableMixin, EmitterMixin );\n\nexport default ObservableMixin;\n\n// Init symbol properties needed to for the observable mechanism to work.\n//\n// @private\n// @param {module:utils/observablemixin~ObservableMixin} observable\nfunction initObservable( observable ) {\n\t// Do nothing if already inited.\n\tif ( observablePropertiesSymbol in observable ) {\n\t\treturn;\n\t}\n\n\t// The internal hash containing the observable's state.\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, observablePropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Map containing bindings to external observables. It shares the binding objects\n\t// (`{ observable: A, property: 'a', to: ... }`) with {@link module:utils/observablemixin~ObservableMixin#_boundProperties} and\n\t// it is used to observe external observables to update own properties accordingly.\n\t// See {@link module:utils/observablemixin~ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\tz: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t},\n\t//\t\t\t\tC: {\n\t//\t\t\t\t\tw: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundObservablesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Object that stores which properties of this observable are bound and how. It shares\n\t// the binding objects (`{ observable: A, property: 'a', to: ... }`) with {@link utils.ObservableMixin#_boundObservables}.\n\t// This data structure is a reverse of {@link utils.ObservableMixin#_boundObservables} and it is helpful for\n\t// {@link utils.ObservableMixin#unbind}.\n\t//\n\t// See {@link utils.ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\td: { observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundPropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n}\n\n// A chaining for {@link module:utils/observablemixin~ObservableMixin#bind} providing `.to()` interface.\n//\n// @private\n// @param {...[Observable|String|Function]} args Arguments of the `.to( args )` binding.\nfunction bindTo( ...args ) {\n\tconst parsedArgs = parseBindToArgs( ...args );\n\tconst bindingsKeys = Array.from( this._bindings.keys() );\n\tconst numberOfBindings = bindingsKeys.length;\n\n\t// Eliminate A.bind( 'x' ).to( B, C )\n\tif ( !parsedArgs.callback && parsedArgs.to.length > 1 ) {\n\t\t/**\n\t\t * Binding multiple observables only possible with callback.\n\t\t *\n\t\t * @error observable-bind-no-callback\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-no-callback: Binding multiple observables only possible with callback.' );\n\t}\n\n\t// Eliminate A.bind( 'x', 'y' ).to( B, callback )\n\tif ( numberOfBindings > 1 && parsedArgs.callback ) {\n\t\t/**\n\t\t * Cannot bind multiple properties and use a callback in one binding.\n\t\t *\n\t\t * @error observable-bind-to-extra-callback\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.' );\n\t}\n\n\tparsedArgs.to.forEach( to => {\n\t\t// Eliminate A.bind( 'x', 'y' ).to( B, 'a' )\n\t\tif ( to.properties.length && to.properties.length !== numberOfBindings ) {\n\t\t\t/**\n\t\t\t * The number of properties must match.\n\t\t\t *\n\t\t\t * @error observable-bind-to-properties-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-to-properties-length: The number of properties must match.' );\n\t\t}\n\n\t\t// When no to.properties specified, observing source properties instead i.e.\n\t\t// A.bind( 'x', 'y' ).to( B ) -> Observe B.x and B.y\n\t\tif ( !to.properties.length ) {\n\t\t\tto.properties = this._bindProperties;\n\t\t}\n\t} );\n\n\tthis._to = parsedArgs.to;\n\n\t// Fill {@link BindChain#_bindings} with callback. When the callback is set there's only one binding.\n\tif ( parsedArgs.callback ) {\n\t\tthis._bindings.get( bindingsKeys[ 0 ] ).callback = parsedArgs.callback;\n\t}\n\n\tattachBindToListeners( this._observable, this._to );\n\n\t// Update observable._boundProperties and observable._boundObservables.\n\tupdateBindToBound( this );\n\n\t// Set initial values of bound properties.\n\tthis._bindProperties.forEach( propertyName => {\n\t\tupdateBoundObservableProperty( this._observable, propertyName );\n\t} );\n}\n\n// Binds to an attribute in a set of iterable observables.\n//\n// @private\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @param {Function} callback\nfunction bindToMany( observables, attribute, callback ) {\n\tif ( this._bindings.size > 1 ) {\n\t\t/**\n\t\t * Binding one attribute to many observables only possible with one attribute.\n\t\t *\n\t\t * @error observable-bind-to-many-not-one-binding\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().' );\n\t}\n\n\tthis.to(\n\t\t// Bind to #attribute of each observable...\n\t\t...getBindingTargets( observables, attribute ),\n\t\t// ...using given callback to parse attribute values.\n\t\tcallback\n\t);\n}\n\n// Returns an array of binding components for\n// {@link Observable#bind} from a set of iterable observables.\n//\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @returns {Array.<String|Observable>}\nfunction getBindingTargets( observables, attribute ) {\n\tconst observableAndAttributePairs = observables.map( observable => [ observable, attribute ] );\n\n\t// Merge pairs to one-dimension array of observables and attributes.\n\treturn Array.prototype.concat.apply( [], observableAndAttributePairs );\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n\n// Parses and validates {@link Observable#bind}`.to( args )` arguments and returns\n// an object with a parsed structure. For example\n//\n//\t\tA.bind( 'x' ).to( B, 'a', C, 'b', call );\n//\n// becomes\n//\n//\t\t{\n//\t\t\tto: [\n//\t\t\t\t{ observable: B, properties: [ 'a' ] },\n//\t\t\t\t{ observable: C, properties: [ 'b' ] },\n//\t\t\t],\n//\t\t\tcallback: call\n// \t\t}\n//\n// @private\n// @param {...*} args Arguments of {@link Observable#bind}`.to( args )`.\n// @returns {Object}\nfunction parseBindToArgs( ...args ) {\n\t// Eliminate A.bind( 'x' ).to()\n\tif ( !args.length ) {\n\t\t/**\n\t\t * Invalid argument syntax in `to()`.\n\t\t *\n\t\t * @error observable-bind-to-parse-error\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-parse-error: Invalid argument syntax in `to()`.' );\n\t}\n\n\tconst parsed = { to: [] };\n\tlet lastObservable;\n\n\tif ( typeof args[ args.length - 1 ] == 'function' ) {\n\t\tparsed.callback = args.pop();\n\t}\n\n\targs.forEach( a => {\n\t\tif ( typeof a == 'string' ) {\n\t\t\tlastObservable.properties.push( a );\n\t\t} else if ( typeof a == 'object' ) {\n\t\t\tlastObservable = { observable: a, properties: [] };\n\t\t\tparsed.to.push( lastObservable );\n\t\t} else {\n\t\t\tthrow new CKEditorError( 'observable-bind-to-parse-error: Invalid argument syntax in `to()`.' );\n\t\t}\n\t} );\n\n\treturn parsed;\n}\n\n// Synchronizes {@link module:utils/observablemixin#_boundObservables} with {@link Binding}.\n//\n// @private\n// @param {Binding} binding A binding to store in {@link Observable#_boundObservables}.\n// @param {Observable} toObservable A observable, which is a new component of `binding`.\n// @param {String} toPropertyName A name of `toObservable`'s property, a new component of the `binding`.\nfunction updateBoundObservables( observable, binding, toObservable, toPropertyName ) {\n\tconst boundObservables = observable[ boundObservablesSymbol ];\n\tconst bindingsToObservable = boundObservables.get( toObservable );\n\tconst bindings = bindingsToObservable || {};\n\n\tif ( !bindings[ toPropertyName ] ) {\n\t\tbindings[ toPropertyName ] = new Set();\n\t}\n\n\t// Pass the binding to a corresponding Set in `observable._boundObservables`.\n\tbindings[ toPropertyName ].add( binding );\n\n\tif ( !bindingsToObservable ) {\n\t\tboundObservables.set( toObservable, bindings );\n\t}\n}\n\n// Synchronizes {@link Observable#_boundProperties} and {@link Observable#_boundObservables}\n// with {@link BindChain}.\n//\n// Assuming the following binding being created\n//\n// \t\tA.bind( 'a', 'b' ).to( B, 'x', 'y' );\n//\n// the following bindings were initialized by {@link Observable#bind} in {@link BindChain#_bindings}:\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [] },\n// \t\t\tb: { observable: A, property: 'b', to: [] },\n// \t\t}\n//\n// Iterate over all bindings in this chain and fill their `to` properties with\n// corresponding to( ... ) arguments (components of the binding), so\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [ B, 'x' ] },\n// \t\t\tb: { observable: A, property: 'b', to: [ B, 'y' ] },\n// \t\t}\n//\n// Then update the structure of {@link Observable#_boundObservables} with updated\n// binding, so it becomes:\n//\n// \t\tMap( {\n// \t\t\tB: {\n// \t\t\t\tx: Set( [\n// \t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] }\n// \t\t\t\t] ),\n// \t\t\t\ty: Set( [\n// \t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n// \t\t\t\t] )\n//\t\t\t}\n// \t\t} )\n//\n// @private\n// @param {BindChain} chain The binding initialized by {@link Observable#bind}.\nfunction updateBindToBound( chain ) {\n\tlet toProperty;\n\n\tchain._bindings.forEach( ( binding, propertyName ) => {\n\t\t// Note: For a binding without a callback, this will run only once\n\t\t// like in A.bind( 'x', 'y' ).to( B, 'a', 'b' )\n\t\t// TODO: ES6 destructuring.\n\t\tchain._to.forEach( to => {\n\t\t\ttoProperty = to.properties[ binding.callback ? 0 : chain._bindProperties.indexOf( propertyName ) ];\n\n\t\t\tbinding.to.push( [ to.observable, toProperty ] );\n\t\t\tupdateBoundObservables( chain._observable, binding, to.observable, toProperty );\n\t\t} );\n\t} );\n}\n\n// Updates an property of a {@link Observable} with a value\n// determined by an entry in {@link Observable#_boundProperties}.\n//\n// @private\n// @param {Observable} observable A observable which property is to be updated.\n// @param {String} propertyName An property to be updated.\nfunction updateBoundObservableProperty( observable, propertyName ) {\n\tconst boundProperties = observable[ boundPropertiesSymbol ];\n\tconst binding = boundProperties.get( propertyName );\n\tlet propertyValue;\n\n\t// When a binding with callback is created like\n\t//\n\t// \t\tA.bind( 'a' ).to( B, 'b', C, 'c', callback );\n\t//\n\t// collect B.b and C.c, then pass them to callback to set A.a.\n\tif ( binding.callback ) {\n\t\tpropertyValue = binding.callback.apply( observable, binding.to.map( to => to[ 0 ][ to[ 1 ] ] ) );\n\t} else {\n\t\tpropertyValue = binding.to[ 0 ];\n\t\tpropertyValue = propertyValue[ 0 ][ propertyValue[ 1 ] ];\n\t}\n\n\tif ( observable.hasOwnProperty( propertyName ) ) {\n\t\tobservable[ propertyName ] = propertyValue;\n\t} else {\n\t\tobservable.set( propertyName, propertyValue );\n\t}\n}\n\n// Starts listening to changes in {@link BindChain._to} observables to update\n// {@link BindChain._observable} {@link BindChain._bindProperties}. Also sets the\n// initial state of {@link BindChain._observable}.\n//\n// @private\n// @param {BindChain} chain The chain initialized by {@link Observable#bind}.\nfunction attachBindToListeners( observable, toBindings ) {\n\ttoBindings.forEach( to => {\n\t\tconst boundObservables = observable[ boundObservablesSymbol ];\n\t\tlet bindings;\n\n\t\t// If there's already a chain between the observables (`observable` listens to\n\t\t// `to.observable`), there's no need to create another `change` event listener.\n\t\tif ( !boundObservables.get( to.observable ) ) {\n\t\t\tobservable.listenTo( to.observable, 'change', ( evt, propertyName ) => {\n\t\t\t\tbindings = boundObservables.get( to.observable )[ propertyName ];\n\n\t\t\t\t// Note: to.observable will fire for any property change, react\n\t\t\t\t// to changes of properties which are bound only.\n\t\t\t\tif ( bindings ) {\n\t\t\t\t\tbindings.forEach( binding => {\n\t\t\t\t\t\tupdateBoundObservableProperty( observable, binding.property );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n}\n\n/**\n * Interface which adds \"observable properties\" and data binding functionality.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/observablemixin~ObservableMixin} mixin.\n *\n * @interface Observable\n * @extends module:utils/emittermixin~Emitter\n */\n\n/**\n * Fired when a property changed value.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `${ propertyName } has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'prop has changed from 1 to 2'\n *\n * @event change:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Fired when a property value is going to be set but is not set yet (before the `change` event is fired).\n *\n * You can control the final value of the property by using\n * the {@link module:utils/eventinfo~EventInfo#return event's `return` property}.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'set:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value is going to be changed from ${ oldValue } to ${ newValue }` );\n *\t\t\tconsole.log( `Current property value is ${ observable[ propertyName ] }` );\n *\n *\t\t\t// Let's override the value.\n *\t\t\tevt.return = 3;\n *\t\t} );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'Value is going to be changed from 1 to 2'\n *\t\t                     // -> 'Current property value is 1'\n *\t\t                     // -> 'Value has changed from 1 to 3'\n *\n * **Note:** Event is fired even when the new value is the same as the old value.\n *\n * @event set:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Creates and sets the value of an observable property of this object. Such an property becomes a part\n * of the state and is be observable.\n *\n * It accepts also a single object literal containing key/value pairs with properties to be set.\n *\n * This method throws the `observable-set-cannot-override` error if the observable instance already\n * have a property with the given property name. This prevents from mistakenly overriding existing\n * properties and methods, but means that `foo.set( 'bar', 1 )` may be slightly slower than `foo.bar = 1`.\n *\n * @method #set\n * @param {String|Object} name The property's name or object with `name=>value` pairs.\n * @param {*} [value] The property's value (if `name` was passed in the first parameter).\n */\n\n/**\n * Binds observable properties to another objects implementing {@link module:utils/observablemixin~Observable}\n * interface (like {@link module:ui/model~Model}).\n *\n * Once bound, the observable will immediately share the current state of properties\n * of the observable it is bound to and react to the changes to these properties\n * in the future.\n *\n * **Note**: To release the binding use {@link module:utils/observablemixin~Observable#unbind}.\n *\n * Using `bind().to()` chain:\n *\n *\t\tA.bind( 'a' ).to( B );\n *\t\tA.bind( 'a' ).to( B, 'b' );\n *\t\tA.bind( 'a', 'b' ).to( B, 'c', 'd' );\n *\t\tA.bind( 'a' ).to( B, 'b', C, 'd', ( b, d ) => b + d );\n *\n * It is also possible to bind to the same property in a observables collection using `bind().toMany()` chain:\n *\n *\t\tA.bind( 'a' ).toMany( [ B, C, D ], 'x', ( a, b, c ) => a + b + c );\n *\t\tA.bind( 'a' ).toMany( [ B, C, D ], 'x', ( ...x ) => x.every( x => x ) );\n *\n * @method #bind\n * @param {...String} bindProperties Observable properties that will be bound to another observable(s).\n * @returns {Object} The bind chain with the `to()` and `toMany()` methods.\n */\n\n/**\n * Removes the binding created with {@link #bind}.\n *\n *\t\tA.unbind( 'a' );\n *\t\tA.unbind();\n *\n * @method #unbind\n * @param {...String} [unbindProperties] Observable properties to be unbound. All the bindings will\n * be released if no properties provided.\n */\n\n/**\n * Turns the given methods of this object into event-based ones. This means that the new method will fire an event\n * (named after the method) and the original action will be plugged as a listener to that event.\n *\n * This is a very simplified method decoration. Itself it doesn't change the behavior of a method (expect adding the event),\n * but it allows to modify it later on by listening to the method's event.\n *\n * For example, in order to cancel the method execution one can stop the event:\n *\n *\t\tclass Foo {\n *\t\t\tconstructor() {\n *\t\t\t\tthis.decorate( 'method' );\n *\t\t\t}\n *\n *\t\t\tmethod() {\n *\t\t\t\tconsole.log( 'called!' );\n *\t\t\t}\n *\t\t}\n *\n *\t\tconst foo = new Foo();\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.stop();\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method(); // Nothing is logged.\n *\n *\n * Note: we used a high priority listener here to execute this callback before the one which\n * calls the original method (which used the default priority).\n *\n * It's also possible to change the return value:\n *\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.return = 'Foo!';\n *\t\t} );\n *\n *\t\tfoo.method(); // -> 'Foo'\n *\n * Finally, it's possible to access and modify the parameters:\n *\n *\t\tmethod( a, b ) {\n *\t\t\tconsole.log( `${ a }, ${ b }`  );\n *\t\t}\n *\n *\t\t// ...\n *\n *\t\tfoo.on( 'method', ( evt, args ) => {\n *\t\t\targs[ 0 ] = 3;\n *\n *\t\t\tconsole.log( args[ 1 ] ); // -> 2\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method( 1, 2 ); // -> '3, 2'\n *\n * @method #decorate\n * @param {String} methodName Name of the method to decorate.\n */\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/priorities\n */\n\n/**\n * String representing a priority value.\n *\n * @typedef {'highest'|'high'|'normal'|'low'|'lowest'} module:utils/priorities~PriorityString\n */\n\n/**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n *\n * @namespace\n */\nconst priorities = {\n\t/**\n\t * Converts a string with priority name to it's numeric value. If `Number` is given, it just returns it.\n\t *\n\t * @static\n\t * @param {module:utils/priorities~PriorityString|Number} priority Priority to convert.\n\t * @returns {Number} Converted priority.\n\t */\n\tget( priority ) {\n\t\tif ( typeof priority != 'number' ) {\n\t\t\treturn this[ priority ] || this.normal;\n\t\t} else {\n\t\t\treturn priority;\n\t\t}\n\t},\n\n\thighest: 100000,\n\thigh: 1000,\n\tnormal: 0,\n\tlow: -1000,\n\tlowest: -100000\n};\n\nexport default priorities;\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/spy\n */\n\n/**\n * Creates a spy function (ala Sinon.js) that can be used to inspect call to it.\n *\n * The following are the present features:\n *\n * * spy.called: property set to `true` if the function has been called at least once.\n *\n * @returns {Function} The spy function.\n */\nfunction spy() {\n\treturn function spy() {\n\t\tspy.called = true;\n\t};\n}\n\nexport default spy;\n","/**\n * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module utils/uid\n */\n\n/**\n * Returns a unique id. This id consist of an 'e' character and a randomly generated string of 32 aphanumeric characters.\n * Each character in uid string represents a hexadecimal digit (base 16).\n *\n * @returns {String} A hexadecimal number representing the id.\n */\nexport default function uid() {\n\tlet uuid = 'e'; // Make sure that id does not start with number.\n\n\tfor ( let i = 0; i < 8; i++ ) {\n\t\tuuid += Math.floor( ( 1 + Math.random() ) * 0x10000 ).toString( 16 ).substring( 1 );\n\t}\n\n\treturn uuid;\n}\n","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar manifest_1 = tslib_1.__importDefault(require(\"./manifest\"));\nvar createReadOnlyValue = function (value) { return ({\n    value: value,\n    writable: false,\n    enumerable: false,\n    configurable: true\n}); };\nfunction createConsumerApi(manifests, exposureMap) {\n    var api = {};\n    Object.keys(exposureMap).forEach(function (key) {\n        Object.defineProperty(api, key, createReadOnlyValue(exposureMap[key]));\n    });\n    Object.defineProperty(api, '@manifest', createReadOnlyValue(manifest_1[\"default\"](manifests)));\n    Object.defineProperty(window, '@Neos:HostPluginAPI', createReadOnlyValue(api));\n}\nexports[\"default\"] = createConsumerApi;\n//# sourceMappingURL=createConsumerApi.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar createConsumerApi_1 = tslib_1.__importDefault(require(\"./createConsumerApi\"));\nexports.createConsumerApi = createConsumerApi_1[\"default\"];\nvar readFromConsumerApi_1 = tslib_1.__importDefault(require(\"./readFromConsumerApi\"));\nexports.readFromConsumerApi = readFromConsumerApi_1[\"default\"];\nvar index_1 = require(\"./registry/index\");\nexports.SynchronousRegistry = index_1.SynchronousRegistry;\nexports.SynchronousMetaRegistry = index_1.SynchronousMetaRegistry;\nexports[\"default\"] = readFromConsumerApi_1[\"default\"]('manifest');\n//# sourceMappingURL=index.js.map","\"use strict\";\nexports.__esModule = true;\nexports[\"default\"] = (function (manifests) {\n    return function (identifier, options, bootstrap) {\n        var _a;\n        manifests.push((_a = {},\n            _a[identifier] = {\n                options: options,\n                bootstrap: bootstrap\n            },\n            _a));\n    };\n});\n//# sourceMappingURL=manifest.js.map","\"use strict\";\nexports.__esModule = true;\nfunction readFromConsumerApi(key) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a;\n        if (window['@Neos:HostPluginAPI'] && window['@Neos:HostPluginAPI'][\"@\" + key]) {\n            return (_a = window['@Neos:HostPluginAPI'])[\"@\" + key].apply(_a, args);\n        }\n        throw new Error(\"You are trying to read from a consumer api that hasn't been initialized yet!\");\n    };\n}\nexports[\"default\"] = readFromConsumerApi;\n//# sourceMappingURL=readFromConsumerApi.js.map","\"use strict\";\nexports.__esModule = true;\nvar AbstractRegistry = (function () {\n    function AbstractRegistry(description) {\n        this.SERIAL_VERSION_UID = 'd8a5aa78-978e-11e6-ae22-56b6b6499611';\n        this.description = description;\n    }\n    return AbstractRegistry;\n}());\nexports[\"default\"] = AbstractRegistry;\n//# sourceMappingURL=AbstractRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar SynchronousRegistry_1 = tslib_1.__importDefault(require(\"./SynchronousRegistry\"));\nvar SynchronousMetaRegistry = (function (_super) {\n    tslib_1.__extends(SynchronousMetaRegistry, _super);\n    function SynchronousMetaRegistry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SynchronousMetaRegistry.prototype.set = function (key, value) {\n        if (value.SERIAL_VERSION_UID !== 'd8a5aa78-978e-11e6-ae22-56b6b6499611') {\n            throw new Error('You can only add registries to a meta registry');\n        }\n        return _super.prototype.set.call(this, key, value);\n    };\n    return SynchronousMetaRegistry;\n}(SynchronousRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousMetaRegistry;\n//# sourceMappingURL=SynchronousMetaRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar AbstractRegistry_1 = tslib_1.__importDefault(require(\"./AbstractRegistry\"));\nvar positional_array_sorter_1 = tslib_1.__importDefault(require(\"@neos-project/positional-array-sorter\"));\nvar SynchronousRegistry = (function (_super) {\n    tslib_1.__extends(SynchronousRegistry, _super);\n    function SynchronousRegistry(description) {\n        var _this = _super.call(this, description) || this;\n        _this._registry = [];\n        return _this;\n    }\n    SynchronousRegistry.prototype.set = function (key, value, position) {\n        if (position === void 0) { position = 0; }\n        if (typeof key !== 'string') {\n            throw new Error('Key must be a string');\n        }\n        if (typeof position !== 'string' && typeof position !== 'number') {\n            throw new Error('Position must be a string or a number');\n        }\n        var entry = { key: key, value: value };\n        if (position) {\n            entry.position = position;\n        }\n        var indexOfItemWithTheSameKey = this._registry.findIndex(function (item) { return item.key === key; });\n        if (indexOfItemWithTheSameKey === -1) {\n            this._registry.push(entry);\n        }\n        else {\n            this._registry[indexOfItemWithTheSameKey] = entry;\n        }\n        return value;\n    };\n    SynchronousRegistry.prototype.get = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return null;\n        }\n        var result = this._registry.find(function (item) { return item.key === key; });\n        return result ? result.value : null;\n    };\n    SynchronousRegistry.prototype._getChildrenWrapped = function (searchKey) {\n        var unsortedChildren = this._registry.filter(function (item) { return item.key.indexOf(searchKey + '/') === 0; });\n        return positional_array_sorter_1[\"default\"](unsortedChildren);\n    };\n    SynchronousRegistry.prototype.getChildrenAsObject = function (searchKey) {\n        var result = {};\n        this._getChildrenWrapped(searchKey).forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getChildren = function (searchKey) {\n        return this._getChildrenWrapped(searchKey).map(function (item) { return item.value; });\n    };\n    SynchronousRegistry.prototype.has = function (key) {\n        if (typeof key !== 'string') {\n            console.error('Key must be a string');\n            return false;\n        }\n        return Boolean(this._registry.find(function (item) { return item.key === key; }));\n    };\n    SynchronousRegistry.prototype._getAllWrapped = function () {\n        return positional_array_sorter_1[\"default\"](this._registry);\n    };\n    SynchronousRegistry.prototype.getAllAsObject = function () {\n        var result = {};\n        this._getAllWrapped().forEach(function (item) {\n            result[item.key] = item.value;\n        });\n        return result;\n    };\n    SynchronousRegistry.prototype.getAllAsList = function () {\n        return this._getAllWrapped().map(function (item) { return Object.assign({ id: item.key }, item.value); });\n    };\n    return SynchronousRegistry;\n}(AbstractRegistry_1[\"default\"]));\nexports[\"default\"] = SynchronousRegistry;\n//# sourceMappingURL=SynchronousRegistry.js.map","\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar SynchronousRegistry_1 = tslib_1.__importDefault(require(\"./SynchronousRegistry\"));\nexports.SynchronousRegistry = SynchronousRegistry_1[\"default\"];\nvar SynchronousMetaRegistry_1 = tslib_1.__importDefault(require(\"./SynchronousMetaRegistry\"));\nexports.SynchronousMetaRegistry = SynchronousMetaRegistry_1[\"default\"];\n//# sourceMappingURL=index.js.map","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().CkEditorApi;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().NeosUiDecorators;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('NeosProjectPackages')().ReactUiComponents;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().plow;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().PropTypes;\n","import readFromConsumerApi from '../../../../dist/readFromConsumerApi';\n\nmodule.exports = readFromConsumerApi('vendor')().React;\n","\"use strict\";\nexports.__esModule = true;\nvar isOriginal = function (value) { return value && value.indexOf && value.indexOf('_original_') === 0; };\nvar getOriginal = function (value) { return value && value.substring && Number(value.substring(10)); };\nvar positionalArraySorter = function (subject, position, idKey) {\n    if (position === void 0) { position = 'position'; }\n    if (idKey === void 0) { idKey = 'key'; }\n    var positionAccessor = typeof position === 'string' ? function (value) { return value[position]; } : position;\n    var positionsArray = subject.map(function (value, index) {\n        var position = positionAccessor(value);\n        return position === undefined ? \"_original_\" + index : position;\n    });\n    var validKeys = subject.map(function (value) { return idKey in value && value[idKey]; }).filter(function (i) { return i; }).map(function (i) { return String(i); });\n    var middleKeys = [];\n    var startKeys = [];\n    var endKeys = [];\n    var beforeKeys = [];\n    var afterKeys = [];\n    var corruptKeys = [];\n    positionsArray.forEach(function (value, index) {\n        if (isNaN(value) === false || isOriginal(value)) {\n            middleKeys.push([index, value]);\n        }\n        else if (typeof value === 'string') {\n            if (value.includes('start')) {\n                var weightMatch = value.match(/start\\s+(\\d+)/);\n                var weight = (weightMatch && weightMatch[1]) || 0;\n                startKeys.push([index, Number(weight)]);\n            }\n            else if (value.includes('end')) {\n                var weightMatch = value.match(/end\\s+(\\d+)/);\n                var weight = (weightMatch && weightMatch[1]) || 0;\n                endKeys.push([index, Number(weight)]);\n            }\n            else if (value.includes('before')) {\n                var keyMatch = value.match(/before\\s+(\\S+)/);\n                var key = keyMatch && keyMatch[1];\n                if (key && validKeys.includes(key)) {\n                    beforeKeys.push([index, key]);\n                }\n                else {\n                    corruptKeys.push(index);\n                    console.warn('The following position value is corrupt: %s', value);\n                }\n            }\n            else if (value.includes('after')) {\n                var keyMatch = value.match(/after\\s+(\\S+)/);\n                var key = keyMatch && keyMatch[1];\n                if (key && validKeys.includes(key)) {\n                    afterKeys.push([index, key]);\n                }\n                else {\n                    corruptKeys.push(index);\n                    console.warn('The following position value is corrupt: %s', value);\n                }\n            }\n            else {\n                corruptKeys.push(index);\n                console.warn('The following position value is corrupt: %s', value);\n            }\n        }\n        else {\n            corruptKeys.push(index);\n            console.warn('The following position value is corrupt: %s', value);\n        }\n    });\n    var sortByWeightFunc = function (a, b) { return a[1] - b[1]; };\n    var sortWithRetainingOriginalPos = function (_a, _b) {\n        var a = _a[1];\n        var b = _b[1];\n        if (isOriginal(a) && isOriginal(b)) {\n            return getOriginal(a) - getOriginal(b);\n        }\n        if (typeof a === 'string' && a.includes && a.includes('_original_')) {\n            return 1;\n        }\n        if (typeof b === 'string' && b.includes && b.includes('_original_')) {\n            return -1;\n        }\n        return Number(a) - Number(b);\n    };\n    var sortedIndexes = startKeys.sort(sortByWeightFunc).map(function (pair) { return pair[0]; }).concat(middleKeys.sort(sortWithRetainingOriginalPos).map(function (pair) { return pair[0]; }), corruptKeys, endKeys.sort(sortByWeightFunc).map(function (pair) { return pair[0]; }));\n    var _loop_1 = function () {\n        var alteredNumber = 0;\n        beforeKeys.forEach(function (pair, index) {\n            var targetIndexInSubject = subject.findIndex(function (item) { return String(item[idKey]) === pair[1]; });\n            var indexInIndexes = sortedIndexes.findIndex(function (item) { return item === targetIndexInSubject; });\n            if (indexInIndexes !== -1) {\n                sortedIndexes.splice(indexInIndexes, 0, pair[0]);\n                beforeKeys.splice(index, 1);\n                alteredNumber++;\n            }\n        });\n        afterKeys.forEach(function (pair, index) {\n            var targetIndexInSubject = subject.findIndex(function (item) { return String(item[idKey]) === pair[1]; });\n            var indexInIndexes = sortedIndexes.findIndex(function (item) { return item === targetIndexInSubject; });\n            if (indexInIndexes !== -1) {\n                sortedIndexes.splice(indexInIndexes + 1, 0, pair[0]);\n                afterKeys.splice(index, 1);\n                alteredNumber++;\n            }\n        });\n        if (alteredNumber === 0) {\n            console.warn('Circular reference detected. Append broken entries at the end.');\n            sortedIndexes = sortedIndexes.concat(beforeKeys.map(function (pair) { return pair[0]; }), afterKeys.map(function (pair) { return pair[0]; }));\n            return \"break\";\n        }\n    };\n    while (beforeKeys.length > 0 || afterKeys.length > 0) {\n        var state_1 = _loop_1();\n        if (state_1 === \"break\")\n            break;\n    }\n    return sortedIndexes.map(function (index) { return subject[index]; });\n};\nexports[\"default\"] = positionalArraySorter;\n//# sourceMappingURL=positionalArraySorter.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {IconButton} from '@neos-project/react-ui-components';\nimport {neos} from '@neos-project/neos-ui-decorators';\n\nimport {executeCommand} from '@neos-project/neos-ui-ckeditor5-bindings';\n\n@neos(globalRegistry => ({\n    i18nRegistry: globalRegistry.get('i18n')\n}))\nexport default class ExampleButton extends PureComponent {\n    static propTypes = {\n        i18nRegistry: PropTypes.object,\n        tooltip: PropTypes.string,\n        isActive: PropTypes.boolean,\n    };\n    handleClick = () => {\n        // this command name must match the identifier of the command from examplePlugin.js, this.editor.commands.add(...)\n        executeCommand('highlightCommand');\n    };\n    render() {\n        const props = {\n            onClick: this.handleClick,\n            isActive: Boolean(this.props.isActive),\n            title: this.props.i18nRegistry.translate(this.props.tooltip),\n            icon: this.props.icon,\n        };\n        return <IconButton {...props} />;\n    }\n}\n","import Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport AttributeCommand from '@ckeditor/ckeditor5-basic-styles/src/attributecommand';\n\nexport default class Example extends Plugin {\n    static get pluginName() {\n        return 'exampleExtension';\n    }\n    init() {\n        // we allow to mark arbitrary texts with the attribute \"exampleAttribute\" in the CKEditor Model.\n        this.editor.model.schema.extend('$text', {allowAttributes: 'exampleAttribute'});\n\n        // then, we define how this attribute in the model should be translated to the view, i.e. by setting a span with a\n        // certain class; and a certain CSS style.\n        // Reference: https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_conversion_conversion-Conversion.html#function-attributeToElement\n        const config = {\n            // the name of the model must match the \"allowAttribute\" from above.\n            model: 'exampleAttribute',\n            view: {\n                name: 'span',\n                classes: 'example-class',\n\n                // here, we additionally set a CSS style property inline. In the real world, you probably would\n                // not do this, but instead style the class using your CSS.\n                //\n                // NOTE: when removing the style definition here, the style tags are automatically removed when a\n                //       <span class=\"example-class\" style=\"...\"></span> is encountered.\n                styles: {\n                    'background-color': 'green',\n                }\n            }\n        };\n        this.editor.conversion.attributeToElement(config);\n\n        // Finally, we need to add a new command to apply this attribute.\n        // \"highlightCommand\" is the identifier of the command now\n        this.editor.commands.add('highlightCommand', new AttributeCommand(this.editor, 'exampleAttribute'));\n    }\n}\n","require('./manifest');\n","import manifest from '@neos-project/neos-ui-extensibility';\nimport {$add, $get} from 'plow-js';\nimport ExamplePlugin from './examplePlugin';\nimport ExampleButton from './ExampleButton';\n\n// addExamplePlugin gets passed two parameters:\n// - `ckEditorConfiguration` contains the so-far built CKEditor configuration.\n// - `options` is an object with the following fields:\n//   - `editorOptions`: gets `[propertyName].ui.inline.editorOptions` from the NodeTypes.yaml\n//   - `userPreferences`: `user.preferences` from redux store\n//   - `globalRegistry`: the global registry\n//   - `propertyDomNode`: the DOM node where the editor should be initialized.\n//\n// it needs to return the updated ckEditorConfiguration.\nconst addExamplePlugin = (ckEditorConfiguration, options) => {\n    if ($get(['formatting', 'Neos.Neos.Ui.ExtensibilityExamples:MyCustomSpan'], options.editorOptions)) {\n        ckEditorConfiguration.plugins = ckEditorConfiguration.plugins || [];\n        return $add('plugins', ExamplePlugin, ckEditorConfiguration);\n    }\n    return ckEditorConfiguration;\n};\n\nmanifest('Neos.Neos.Ui.ExtensibilityExamples:CustomStylingForCkEditor', {}, globalRegistry => {\n    const richtextToolbar = globalRegistry.get('ckEditor5').get('richtextToolbar');\n\n    richtextToolbar.set('exampleExtension', {\n        // the command name must match the command in examplePlugin.js this.editor.commands.add(...)\n        commandName: 'highlightCommand',\n        // the path in isActive must match the commandName from the line above, to ensure the active state\n        // of the button automatically toggles.\n        isActive: $get('highlightCommand'),\n        isVisible: $get(['formatting', 'Neos.Neos.Ui.ExtensibilityExamples:MyCustomSpan']),\n\n        component: ExampleButton,\n        icon: 'plus-square',\n        tooltip: 'Mark a span',\n    }, 'before strong');\n\n    const config = globalRegistry.get('ckEditor5').get('config');\n    config.set('exampleExtension', addExamplePlugin);\n});\n"],"sourceRoot":""}